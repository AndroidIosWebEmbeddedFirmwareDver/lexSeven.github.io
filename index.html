<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>桌面</title>
    <link rel="stylesheet" href="css/comment.css">
    <link rel="stylesheet" href="css/qqMusic.css">
</head>
<body>


<div class="qqMusicPlay">
    <div class="qqMleftMenu">
        <div class="userInfo">
            <div class="userHead">
                <img src="img/qqMusic/head.png">
            </div>
            <div class="userDesc">
                <i class="qqMIcon">W</i>
                <span>开通</span>
            </div>
            <div class="userDesc">
                <span>QQ等级加速中</span>
                <i class="qqMIcon">K</i>
            </div>
        </div>
        <div class="leftScrollBox">
            <div class="menuBox">
                <dl class="menuMain">
                    <dt class="menuTit">在线音乐</dt>
                    <dd class="menuItem">
                        <i class="qqMIcon">J</i>
                        <span>音乐馆</span>
                    </dd>
                    <dd class="menuItem">
                        <i class="qqMIcon">S</i>
                        <span>MV</span>
                    </dd>
                    <dd class="menuItem active">
                        <i class="qqMIcon">O</i>
                        <span>个性电台</span>
                    </dd>
                    <dd class="menuItem">
                        <i class="qqMIcon">L</i>
                        <span>明日之子第二季</span>
                    </dd>
                </dl>
                <dl class="menuMain">
                    <dt class="menuTit">我的音乐</dt>
                    <dd class="menuItem">
                        <i class="qqMIcon">N</i>
                        <span>我喜欢</span>
                    </dd>
                    <dd class="menuItem">
                        <i class="qqMIcon">R</i>
                        <span>本地和下载</span>
                    </dd>
                    <dd class="menuItem">
                        <i class="qqMIcon">H</i>
                        <span>播放历史</span>
                    </dd>
                    <dd class="menuItem">
                        <i class="qqMIcon">D</i>
                        <span>试听列表</span>
                    </dd>
                </dl>
                <dl class="menuMain">
                    <dt class="menuTit">
                        我创建的歌单
                        <i class="qqMIcon funcBtn">g</i>
                        <i class="funcBtn">十</i>
                    </dt>
                    <dd class="menuItem">
                        <i class="qqMIcon">C</i>
                        <span>音乐馆</span>
                    </dd>
                    <dd class="menuItem">
                        <i class="qqMIcon">C</i>
                        <span>MV</span>
                    </dd>
                </dl>
            </div>
        </div>
    </div>
    <div class="qqMContent">
        <div class="contHead">
            <i class="qqMIcon">e</i>
            <i class="qqMIcon">f</i>
            <i class="qqMIcon">U</i>
            <div class="inpBox">
                <svg aria-hidden="true" data-prefix="fal" data-icon="search" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-search fa-w-16 fa-2x"><path fill="currentColor" d="M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395 312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5 0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17 0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208 32s176 78.7 176 176-78.7 176-176 176z" class=""></path></svg>
                <input type="text" placeholder="搜索音乐、MV、歌单、用户">
            </div>
            <i class="qqMIcon" title="听歌识曲">d</i>

            <div class="right">
                <i class="qqMIcon">T</i>
                <i class="qqMIcon">I</i>
                <i class="qqMIcon">Q</i>
                <i class="qqMIcon">B</i>

                <i class="qqMIcon">X</i>
                <i class="qqMIcon">Y</i>
                <i class="qqMIcon">Z</i>
                <i class="qqMIcon">a</i>
            </div>
        </div>
        <div class="musicLab">
            <div class="searchTit">
                <div class="resList">
                    <span class="active">歌曲</span>
                    <span>专辑</span>
                    <span>歌单</span>
                    <span>MV</span>
                    <span class="active">歌词</span>
                    <span>用户</span>
                </div>
                <div class="response">
                    找到23首歌曲 <em>满意</em> <em>不满意</em>
                </div>
            </div>
            <div class="scrollBox">
                <div class="scrollMain">
                    <ul class="searchResaultList">
                        <li>
                            <span class="songName">默默（《神武3》游戏主题曲）</span>
                            <span class="singer">黄子韬</span>
                            <span class="album">卡路里</span>
                            <span class="duration">03:00</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
    <div class="qqMControl">
        <div class="prevBtn btn qqMIcon">E</div>
        <div class="playBtn btn qqMIcon">F</div>
        <div class="nextBtn btn qqMIcon">G</div>
    </div>
    <div class="qqMProgress">
        <div class="cdDesk">
            <img src="https://y.gtimg.cn/music/photo_new/T002R300x300M0000014e2ad1SGElc.jpg?max_age=2592000">
        </div>
        <div class="soundEffect">
            <div class="effBtn">
                <span>标准</span>
                <i class="qqMIcon">g</i>
            </div>
            <div class="effBtn">
                <span>音效</span>
                <i class="qqMIcon">g</i>
            </div>
        </div>
        <div class="playLine">
            <div class="inf"><span>QQ音乐，听我想听的歌</span><em>00:00/00:00</em></div>
            <div class="proMain"><span></span></div>
        </div>
        <div class="fnBtn">
            <i class="qqMIcon">N</i>
            <i class="qqMIcon">b</i>
            <i class="qqMIcon">P</i>
        </div>
        <div class="fnBtn">
            <i class="qqMIcon">c</i>
            <i class="qqMIcon">V</i>
            <i class="qqMIcon">M</i>
        </div>
        <div class="fnBtn">
            <i class="qqMIcon">D</i>
            <em>36</em>
        </div>
    </div>
    <!--<div class="qqMenu">
        <ul class="menuTop">
            <li>
                <i class="qqMIcon">k</i>
                <span>传歌到设备</span>
            </li>
            <li>
                <i class="qqMIcon">l</i>
                <span>音频转码</span>
            </li>
            <li>
                <i class="qqMIcon">m</i>
                <span>铃声制作</span>
            </li>
            <li>
                <i class="qqMIcon">n</i>
                <span>微云音乐网盘</span>
            </li>
            <li>
                <i class="qqMIcon">o</i>
                <span>定时设置</span>
            </li>
            <li>
                <i class="qqMIcon">p</i>
                <span>反馈与修复</span>
            </li>
        </ul>
        <ul class="setList">
            <li><span>添加歌曲</span></li>
            <li><span>上传视频</span><em class="qqMIcon">f</em></li>
        </ul>
        <ul class="setList">
            <li><i class="qqMIcon">q</i><span>设置</span></li>
            <li><span>帮助</span><em class="qqMIcon">f</em></li>
            <li><span>升级</span></li>
            <li><span>切换账号</span></li>
            <li><i class="qqMIcon">r</i><span>退出QQ音乐</span></li>
        </ul>
    </div>-->
</div>

<audio id="au" src="" autoplay="autoplay"></audio>

<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/bscroll.js"></script>
<script src="js/tool.js"></script>
<script src="data/qqMusic.js"></script>
<script src="js/music.js"></script>
<script>

    var searchInp = document.querySelector('.contHead .inpBox input');
    var resBox = document.querySelector('.searchResaultList');
    var au = document.querySelector('#au');

    music.init(data);

    searchInp.onkeydown = function(ev){
        if(ev.keyCode == 13){
           search(this.value,function(res){
                console.log(res);
                var str = '';
                res.data.info.forEach(function(item){
                    str += '<li data-hash="'+ item.hash +'" >\
                        <span class="songName">'+ item.songname +'</span>\
                        <span class="singer">'+ item.singername +'</span>\
                        <span class="album">'+ item.album_name +'</span>\
                        <span class="duration">03:00</span>\
                    </li>'
                });
                resBox.innerHTML = str;
            });

            /*Bsearch(this.value,function(res){
//                console.log(res);
                var str = '';
                res.song.forEach(function(item){
                    str += '<li data-hash="'+ item.songid +'" >\
                        <span class="songName">'+ item.songname +'</span>\
                        <span class="singer">'+ item.artistname +'</span>\
                        <span class="album"></span>\
                        <span class="duration">03:00</span>\
                    </li>'
                });
                resBox.innerHTML = str;
            });*/
        }
    };

    resBox.onclick = function(ev){
        var target = ev.target;
        if(ev.target.tagName == 'SPAN'){
            target = ev.target.parentNode;
        }
        audiopay(target.dataset.hash);
    };

    function audiopay(songid) {/*酷狗播放音乐*/
        console.log(songid);
        $.ajax({
            url: 'http://www.kugou.com/yy/index.php?r=play/getdata&hash='+songid,
            type: 'get',
            dataType: 'jsonp',
            success: function (res) {
                var obj = {
                    playSrc:res.data.play_url,
                    img:res.data.img,
                    time:res.data.timelength/1000,
                    songName:res.data.audio_name
                };
                music.resetMusic(obj);
            }
        });
    }


    function search(keyWord,fn){/*酷狗搜索音乐*/
        $.ajax({
            url: 'http://mobilecdn.kugou.com/api/v3/search/song',
            type: 'get',
            dataType: 'jsonp',
            data: {
                format:'jsonp',
                calback:'',
                pagesize:20,
                showtype:2,
                page:1,
                keyword:keyWord
            },
            success:function(res){
                fn&&fn(res);
            }
        });
    }

    function Bsearch(keyWord,fn){/* 百度搜索音乐 */
        $.ajax({
            url: 'http://tingapi.ting.baidu.com/v1/restserver/ting',
            type: 'get',
            dataType: 'jsonp',
            data: {
                format:'json',
                calback:'',
                from:'webapp_music',
                method:'baidu.ting.search.catalogSug',
                query:keyWord
            },
            success:function(res){
                fn&&fn(res);
            }
        });
    }

    setHeight(690);
    function setHeight(height){
        var _this = setHeight;
        _this.parent = $s('.qqMusicPlay');
        _this.leftMenu = $s('.qqMleftMenu');
        _this.leftScrollBox = $s('.leftScrollBox');
        _this.content = $s('.qqMContent .scrollBox');

        _this.parent.style.height = height+'px';
        _this.leftMenu.style.height = height - 70 + 'px';
        _this.content.style.height = height - 70 - 104 + 'px';
        _this.leftScrollBox.style.height = height - 70 - 147 + 'px';
    };

var wrapper = $s('.scrollBox');
let scroll = new BScroll(wrapper,{
    scrollY:true,
    mouseWheel: {
        speed: 20,
        invert: false,
        easeTime: 300
    },
    scrollbar: {
        fade: true,
        interactive: false // 1.8.0 新增
    }
});

var leftWrapper = $s('.leftScrollBox');
let leftScroll = new BScroll(leftWrapper,{
    scrollY:true,
    mouseWheel: {
        speed: 20,
        invert: false,
        easeTime: 300
    },
    scrollbar: {
        fade: true,
        interactive: false // 1.8.0 新增
    }
});

</script>

</body>
</html>