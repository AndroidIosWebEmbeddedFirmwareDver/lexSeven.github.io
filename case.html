<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Lex_visual</title>
<link href="images/icon.ico" rel="icon" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
</head>

<body>

<div id="box" class="box">
<!--dotStar-->
<div class="dot dot1"></div>
<div class="dot dot2"></div>
<div class="dot dot3"></div>
<div class="dot dot4"></div>
<div class="dot dot5"></div>
<div class="dot dot6"></div>
<div class="dot dot7"></div>
<div class="dot dot8"></div>
<div class="dot dot9"></div>
<div class="dot dot10"></div>
<!--dotEnd-->

<div class="ps"></div>
<div class="dw"></div>
<div class="js"></div>

<!--案例开始-->
<div class="show" id="show">
</div>
<!--案例结束-->

</div>

<!--case-->
<div class="case1"><div class="case2">
<div class="case3">&nbsp;</div>
	<img src="images/case_01.jpg" />
</div></div>

<!--menu-->
<div class="menu" id="menu">
	<div id="Mclose" class="M_close"></div>
	<ul>
    	<li><a href="index.html">网站首页</a></li>
        <li><a href="case.html">案例展示</a></li>
        <li><a href="inf.html">个人信息</a></li>
        <li><a href="#">个人收藏</a></li>
    </ul>
</div>


<div class="tell">
    <div class="number"><span>Tel</span><i>QQ 305346765 / 1867399124</i></div>
    <div class="copy">Width Our Young Sitll Has A Dream! Lex Visual  Copyright:BeiJing Sino Sincere Technology Development.,LTD</div>
</div>


<div class="bg" id="bg"></div>

</body>
<script src="js/common.js"></script>
<script src="js/tween.js"></script>
<script src="js/data.js"></script>
<script src="js/all.js"></script>
<script>

var Width = document.documentElement.clientWidth;
var Height = document.documentElement.clientHeight;
var box = document.getElementById('box');
var show = document.getElementById('show');
var menu = document.getElementById('menu');
var Mclose = document.getElementById('Mclose');
var arr = getByClass( 'dot',box );

//var off = false;

//alert(menua.length);
//alert(arrlogo.length);

window.onresize = function(){
	Width = document.documentElement.clientWidth;
	Height = document.documentElement.clientHeight;
	BoxPosition();
};


BoxPosition();//box定位
menuDrag( menu , Mclose );//导航拖拽

/*鼠标移动动画*/
bind(document,'mousemove',function( ev ){
	//if(!off){return;};
	box.style.transition = '1s';
	var ev = ev||event;
	ileft = ev.clientX;
	itop = ev.clientY;
	boxmove(box,ileft,itop,0.05);
	move(arr[0],ileft,itop,0.07);
	move(arr[1],ileft,itop,0.03);
	move(arr[2],ileft,itop,0.3);
	move(arr[3],ileft,itop,0.09);
	move(arr[4],ileft,itop,0.05);
	move(arr[5],ileft,itop,0.02);
	move(arr[6],ileft,itop,0.05);
	move(arr[7],ileft,itop,0.09);
	move(arr[8],ileft,itop,0.04);
	move(arr[8],ileft,itop,0.06);
	move(arr[9],ileft,itop,0.2);
	//move(arr[10],ileft,itop,0.01);
});

//案例定位

Caseshow();
function Caseshow(){
	show.style.opacity = 0;
	show.style.filter = 'alpha(opacity:0)';
	var map = getNum()[0]%arropacity.length;
	var span = show.getElementsByTagName('span');
	var bg = document.getElementById('bg');
	var off = true;
	var e = 0;
	var n = 0;
	var str = '';
	for(var i=0;i<45;i++){str+='<span></span>';};
	show.innerHTML = str;
	for(var i=0;i<span.length;i++){
		span[i].index = i;
		
		if(arropacity[map][i]>0){
		span[i].num = n;
		n++;
		//span[i].innerHTML = i;
		span[i].style.opacity = 0;
		span[i].style.filter = 'alpha(opacity:0)';
		
		span[i].style.top = 100*i-1000+'px';
		span[i].style.left = 100*(span.length/2-i)-2000+'px';
		if(i>span.length/4){span[i].style.left = 100*i-1900+'px';};
		if(i>span.length/2){span[i].style.top = 100*(span.length-i)-1000+'px';};
		if(i>span.length/4*3){span[i].style.left = 100*((span.length-i)+span.length/2)-2000+'px';};
		
		span[i].style.background = 'url('+ arrsrc[span[i].num%arrsrc.length] +') no-repeat center center';
		span[i].innerHTML = '<div class = "close"></div>';
		};
	};
	
	opacity(show , 5 , 100,function(){
		for(var i=0;i<span.length;i++){
			span[i].mLeft = (span[i].offsetWidth+1)*(i%9);
			//alert(span[i].mLeft);
			span[i].mTop = (span[i].offsetHeight+1)*Math.floor(i/9);
			opacity(span[i] , 1 , arropacity[map][i])
			startMove(span[i], {left :span[i].mLeft , top :span[i].mTop});
		};
	});
	

	for(var i=0;i<span.length;i++){
		
		//span[i].mLeft = span[i].offsetLeft;
		//span[i].mTop = span[i].offsetTop;
		span[i].onmouseover = function(){
			if(off){
			this.className = 'over';
			//opacity(this , 5 , 100)
			startMove( this , {width : 150 , height : 150 , left : this.offsetLeft-25 , top:this.offsetTop-25} );
			}
		}
		//span[i].onmouseover = function(){
			//startMove2( this , {width : 150 , height : 150 , left : this.mLeft-25 , top:this.mTop-25} );
		//}
		span[i].onmouseout = function(){
			if(off){
				//opacity(this , 5 , arropacity[0][this.index])
				startMove( this , {width : 100 , height : 100 , left : this.mLeft , top:this.mTop} );
				this.className = '';
			}
		}
		
		
		
		span[i].onclick = function( ev ){
			if(off){
			off = false;
			bg.style.display = 'block';
			opacity( bg , 5 , 50);
			this.style.opacity = 100;
			this.style.filter = 'alpha(opacity:'+100+')';
			this.className = 'big';
			this.style.background = 'url('+ arrsrc[this.num%arrsrc.length] +') no-repeat';
			//startMove2( this , {width : 890 , height : 470 } );
			startMove(this, {width : 890 , height : 470 ,left :30 , top :0} , function(){
				this.innerHTML += '<div id = "text" class = "text">'+ arrtext[this.num%arrtext.length] +'</div><div class = "text_bg"></div><div id = "next" class = "btn"></div><div id = "prev"  class = "btn"></div>';
				var Next = document.getElementById('next');
				var Prev = document.getElementById('prev');
				var text = document.getElementById('text');
				
				Next.onclick = function( ev ){
					ev.cancelBubble = true;
					e = e||this.parentNode.num;
					e++;
					this.parentNode.style.transition = '1s';
					text.innerHTML = arrtext[e%arrtext.length]
					this.parentNode.style.background = 'url('+ arrsrc[e%arrsrc.length] +') no-repeat';
				};
				
				Prev.onclick = function( ev ){
					ev.cancelBubble = true;
					e = e||this.parentNode.num;
					e--;
					if(e<0){e = 45};
					this.parentNode.style.transition = '1s';
					text.innerHTML = arrtext[e%arrtext.length]
					this.parentNode.style.background = 'url('+ arrsrc[e%arrsrc.length] +') no-repeat';
				};
			});
			}
			else{
				off = true;
				this.style.transition = 'none';
				opacity( bg , 5 , 0 , function(){
					bg.style.display = 'none';
				});
				startMove( this , {width : 100 , height : 100 , left : this.mLeft , top:this.mTop});
				this.className = '';
				this.style.opacity = arropacity[map][this.index];
				this.style.filter = 'alpha(opacity:'+arropacity[map][this.index]+')';
				this.style.background = 'url('+ arrsrc[this.num%arrsrc.length] +') no-repeat center center';
				this.innerHTML = '<div class = "close"></div>';
			};
		};
	};

};
</script>
</html>
