<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
    <title>店鋪</title>
    <!-- 公共样式不可删除 -->
    <link rel="stylesheet" href="//mstatic.secooimg.com/activity2018/all_min/css/activity2018.min.css">
    <link rel="stylesheet" href="css/style.css">

    <!--添加听云监控-->
    <script type="text/javascript" src="//mstatic.secooimg.com/js/tingyun-rum.js"></script>
</head>

<!-- uuid为页面在erp中的id，仅在erp后台生成的链接中生效，做数据统计用 -->
<body uuid="page_app_${sectionid?c}" class="eventParent">
<div class="activtyApp_c">
    <!--页面主内容-->
    <div class="wrapper swiper-container">

        <div class="content swiper-wrapper">
            <div class="refresh">
                <svg t="1554350179513" class="icon" style="" viewBox="0 0 1024 1024"><path d="M192 512a32 32 0 0 1 64 0 256 256 0 1 0 256-256 32 32 0 0 1 0-64c176.736 0 320 143.264 320 320s-143.264 320-320 320S192 688.736 192 512z" fill="#333333" p-id="3747"></path></svg>
            </div>
            <div id="root" class="swiper-slide">
                <div class="content-box" v-for="item in data.list">
                    <div class="user-inf">
                        <div class="user-head"><img src="img/head.png"></div>
                        <div class="user-name-box">
                            <div class="user-name-position-box">
                                <h3 class="user-name">{{item.authorName}}</h3>
                                <p class="user-identification">品牌官方</p>
                            </div>
                        </div>
                    </div>
                    <div class="content-main">
                        <div class="img-box">
                            <img src="img/asojdo.png">
                            <div class="img-title">
                                <span>2018秋冬系列秀场造型</span>
                            </div>
                        </div>
                        <div class="function-btn">
                            <div class="function-btn-item">
                                <div class="icon"><img src="img/btn_06.jpg"></div>
                                <div class="text">20</div>
                            </div>
                            <div class="function-btn-item">
                                <div class="icon"><img src="img/btn_03.jpg"></div>
                                <div class="text">20</div>
                            </div>
                            <div class="function-btn-item">
                                <div class="icon"><img src="img/btn_09.jpg"></div>
                                <div class="text">20</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="loading">正在加载...</div>
            </div>
        </div>
    </div>
</div>

<!-- 用作填写分享参数 -->
<div id="share" data-title="" data-description="" data-url="" data-img-url=""></div>

<script src="js/doc.js"></script>
<script src="js/vue.js"></script>
<script src="js/swiper.js"></script>

<!-- 页面配置参数 -->
<script type="text/javascript">
    var pageConfig = {

       loadJsArr: '//pic16.secooimg.com/imagesNew/featuresPic/gxd_vuePro/shopComm.js',
        // loadJsArr: 'js/shopComm.js',

        //设置页面rem，默认可不传，默认值为当前页面宽度的10分之一
        baseRemVal: 10,

        //是否开启图片懒加载，默认为true
        imgLazyLoad: true,

        //是否开启移动端调试工具，默认false
        openDebug: false,

        //是否加载神策数据统计sdk，默认为true
        useSensors: true,

        //是否在控制台输出神策埋点结果，便于测试埋点成功与否，默认为false
        showSensorsLog: false,

        //是否在控制台输出跳转所需参数（包含跳转数据、埋点数据），为了便于查看输出结果，设置此参数后页面会不能跳转，默认为false
        showGoPageLog: false,

        //是否初始化下载条，默认为true，该属性与当前页链接中包含fromShare=1参数同时存在时，该配置项拥有更高的优先级
        initLoad: true,

        //是否初始化头部导航栏，默认true，只在m站生效
        initHead: false
    }

    //zepto加载完成后的回调，与页面配置中同名函数的择一而用
    function zeptoLoaded() {

        var vm = new Vue({
            el:'#root',
            data:data,
            method:{},
            mounted:function(){
                pulldownComponent.swiper.update();
            },
            updated:function(){
                pulldownComponent.swiper.update();
            }
        });

        var pulldownComponent = {
            init: function () {
                var _this = this;
                _this.refreshEnd = false;//是否加载完成
                _this.times = 0;//加载次数
                _this.oriSpeed = 100;//滚动速度
                _this.resistanceRatio = 0.67;//边界下拉时阻力
                _this.refreshDom = document.querySelector('.refresh');
                _this.openScroll();//页面滚动，下拉刷新
                _this.destance = 30;//下拉刷新的距离
            },
            openScroll: function () {
                var _this = this;
                _this.swiper = new Swiper('.swiper-container', {
                    speed: _this.oriSpeed,
                    slidesPerView: 'auto',
                    freeMode: true,
                    direction: 'vertical',
                    setWrapperSize: true,
                    resistanceRatio: _this.resistanceRatio,
                    on: {
                        touchStart: _this.touchStartEvent,
                        touchMove: _this.touchMoveEvent,
                        touchEnd: _this.touchEndEvent,
                        momentumBounce:function(){
                            if(this.translate <= -_this.destance){
                                console.log('上拉加载');
                                var data = {
                                    "authorId": 43,
                                    "authorName": "GUCCI/古驰3",
                                    "authorPic": "作者头像",
                                    "authorType": 2,
                                    "commentCount": 17127,
                                    "commentVideo": "测试内容j85s",
                                    "commentVideoImg": "测试内容554d",
                                    "contentType": 1,
                                    "id": 53562,
                                    "identityLable": "测试内容5ed5",
                                    "imagesJson": [
                                        "https://pic12.secooimg.com/res/contentERP/10/53/1WvJm4f5172d26d19c4019b93e01b5fac020e0.jpg",
                                        "https://pic12.secooimg.com/res/contentERP/98/48/1WvGkEb037027f973041698ac3808ed1f80d78.png"
                                    ],
                                    "optionTime": 1536139328211,
                                    "optionType": 0,
                                    "priorityDisplay": 0,
                                    "relationBrand": "3",
                                    "relationSign": "3",
                                    "relationSku": "3",
                                    "shareCount": 0,
                                    "sourceType": 1,
                                    "storeType": 1,
                                    "thumbsCount": 0,
                                    "thumbsStatus": false,
                                    "title": "3333",
                                    "uuid": "2e9adeadbd9046219f46878886a3dac4"
                                }
                                vm.data.list.push(data);
                            }
                        }
                    }
                });
            },
            touchStartEvent:function(){
                var _this = pulldownComponent;
                if (_this.refreshEnd) {
                    _this.refreshDom.classList.remove('active');
                    _this.refreshEnd = false;
                }
            },
            touchMoveEvent:function(){
                var _this = pulldownComponent;
                if (_this.swiper.translate > _this.destance) {
                    _this.swiper.allowTouchMove = false;
                    _this.refreshDom.classList.add('active');
                }
            },
            touchEndEvent:function(){
                var _this = pulldownComponent;
                if (_this.swiper.translate >= _this.destance) {
                    _this.swiper.setTransition(this.params.speed);
                    _this.swiper.setTranslate(_this.destance);
                    _this.swiper.touchEventsData.isTouched = false;//跳过touchEnd事件后面的跳转(4.0.5)
                    _this.refreshDom.querySelector('svg').classList.add('active');
                    _this.swiper.allowTouchMove = false;
                    setTimeout(function () {//模仿AJAX

                        var data = {
                            "authorId": 43,
                            "authorName": "GUCCI/古驰3",
                            "authorPic": "作者头像",
                            "authorType": 2,
                            "commentCount": 17127,
                            "commentVideo": "测试内容j85s",
                            "commentVideoImg": "测试内容554d",
                            "contentType": 1,
                            "id": 53562,
                            "identityLable": "测试内容5ed5",
                            "imagesJson": [
                                "https://pic12.secooimg.com/res/contentERP/10/53/1WvJm4f5172d26d19c4019b93e01b5fac020e0.jpg",
                                "https://pic12.secooimg.com/res/contentERP/98/48/1WvGkEb037027f973041698ac3808ed1f80d78.png"
                            ],
                            "optionTime": 1536139328211,
                            "optionType": 0,
                            "priorityDisplay": 0,
                            "relationBrand": "3",
                            "relationSign": "3",
                            "relationSku": "3",
                            "shareCount": 0,
                            "sourceType": 1,
                            "storeType": 1,
                            "thumbsCount": 0,
                            "thumbsStatus": false,
                            "title": "3333",
                            "uuid": "2e9adeadbd9046219f46878886a3dac4"
                        }

                        vm.data.list.push(data);
                        console.log(vm.data.list);
                        _this.refreshDom.querySelector('svg').classList.remove('active');
                        _this.refreshEnd = true;
                        _this.swiper.allowTouchMove = true;
                        _this.swiper.setTranslate(0);
                    }, 1000)
                }
            }
        };
        pulldownComponent.init();

        document.addEventListener('touchmove', function (ev) {
            ev.preventDefault();
        });
    };

    //全部js加载完成后的回调，与页面配置中同名函数的择一而用
    function jsLoaded() {}
</script>
​
<!-- 主文件不可删除 -->
<script type="text/javascript" src="//mstatic.secooimg.com/activity2018/all_min/js/activity2018.min.js"></script>
</body>
</html>